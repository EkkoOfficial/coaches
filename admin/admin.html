<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <link rel="stylesheet" href="../stylesheets/css-style.css">
    <script type="text/javascript" src="../client-js/jquery-3.5.1.min.js"></script>
    <title>Admin-Overview</title>
</head>
<body id="adminPage">
<header>
    <nav class="navigation">

        <a href="umbau.html"> <img id="logo" src="pics/logo_StrongHeart.png"/> </a>
        <ul>

            <li><a href="../umbau.html">Shop</a></li>
            <li><a href="../aktionen.html">Aktionen</a></li>
            <li><a href="../umbau.html">Teammitglieder</a></li>
            <li><a href="../umbau.html">Partner</a></li>
            <li><a href="../umbau.html">Kontaktanfragen</a></li>
            <li><a href="../umbau.html">Coaches Anmeldungen</a></li>
            <li><a href="../umbau.html">Showcase Videos</a></li>
            <li>
                <button id="logKnopf">Einloggen</button>
            </li>
        </ul>

    </nav>


    <!-- LOGINMASKE -->

    <div id="loginMaske" class="view">
        <div class="platzhalter"></div>
        <h2 class="ueberschrift">Logge dich ein!</h2>
        <form action="javascript:einloggen()" method="post">

            <table>
                <tr>
                    <div class="formular1">
                        <td><label>Benutzername</label></td>
                        <td><input type="text" placeholder="Benutzernamen eingeben"/></td>
                    </div>
                </tr>
                <tr>
                    <div class="formular">
                        <td><label>Passwort</label></td>
                        <td><input type="password" placeholder="Passwort eingeben"/></td>
                    </div>
                </tr>
                <tr>
                    <div id="rolle">
                        <td><input type="radio" name="rolle" value="admin" checked/>als Admin</td>
                        <td><input type="radio" name="rolle" value="mitarbeiter"/>als Mitarbeiter</td>
                    </div>
                </tr>
                <tr>
                    <td></td>
                    <td><input type="submit" value="Login"/></td>
                </tr>
            </table>
        </form>

    </div>
</header>

<main id="wrapper">
    <section class="container">

        <table id="members_list" class="table">
            <thead>
            <tr>
                <th>Vorname</th>
                <th>Nachname</th>
                <th>Adresse</th>
                <th>PLZ</th>
                <th>Ort</th>
                <th>E-Mail</th>
                <th>Spendenbetrag</th>
                <th>Spende für</th>
                <th>Zahlungsmethode</th>
            </tr>
            </thead>

            </thead>
            <tbody>
            <!--<tr>
                <th>Albert</th>
                <th>Einstein</th>
                <th>Hirschstraße 18</th>
                <th>89075, Ulm</th>
                <th>alert-einstein.emc2@gmail.com</th>
                <th>500€</th>
                <th>Exit-Deutschland e.V.</th>
                <th>PayPal</th>
            </tr>
            <tr>
                <td>Isaac</td>
                <td>Newton</td>
                <td>Main-Street 64</td>
                <td>04889 London</td>
                <td>gravity@aol.com</td>
                <td>100€</td>
                <td>Apple</td>
                <td>Lastschrift</td>
            </tr>
            <tr>
                <td>Stephen</td>
                <td>Hawking</td>
                <td>Broadway 1</td>
                <td>36782 New-York</td>
                <td>stephie.hawk-underground3@gmx.de</td>
                <td>250€</td>
                <td>ALS-Ice-Bucket-Challenge</td>
                <td>Überweisung</td>
            </tr>
            <tr>
                <td>Marie</td>
                <td>Curie</td>
                <td>Rue de la Baguette</td>
                <td>42678 Paris</td>
                <td>rayons-x@web.de</td>
                <td>750€</td>
                <td>Bikini-Atoll-Foundation</td>
                <td>Lastschrift</td>
            </tr>
            <tr>
                <td>Robert</td>
                <td>Koch</td>
                <td>Bakterienalee 879</td>
                <td>23786 Berlin</td>
                <td>rki@outlook.com</td>
                <td>450€</td>
                <td>Querdenken 731 e.V.</td>
                <td>Paypal</td>
            </tr>
            <tr>
                <td>Alfred</td>
                <td>Nobel</td>
                <td>Am Pulverfass 32</td>
                <td>23879 Stockholm(oder Oslo)</td>
                <td>tnt@hotmail.com</td>
                <td>680€</td>
                <td>Nobelpreisstiftung</td>
                <td>Überweisung</td>
            </tr>-->
            </tbody>
        </table>
        <nav class="list-controls">
            <button><a href="aendern.html"</a><img src="../assets/images/iconfinder_15.Pencil_290135.png"></button>
            <button><a href="loeschen.html"</a><img src="../assets/images/iconfinder_basket_1814090.png"></button>
        </nav>
    </section>
</main>
<footer>

    <nav>

        <ul>
            <li><a href="umbau.html">Impressum</a></li>
            <li><a href="umbau.html">Datenschutz</a></li>
            <li><a href="umbau.html">Cookie-Einstellungen</a></li>
            <li><a href="umbau.html">Widerrufsbelehrung</a></li>
            <li><a href="umbau.html">AGB</a></li>


        </ul>

    </nav>

</footer>

<script type="text/javascript">
    //ANZEIGEN
    function homepageAnzeigen() {
        console.log('homepageAnzeigen: ');
        $(".view").hide();
        $("#homepage").show();
    }


    /*  //nur Homepage sichtbar machen
     */
    $(".view").hide();
    $("#homepage").show;
    /*




          */
    // ********* FUNKTIONEN ZUM LOGIN UND LOGOUT **********
    function checkeBerechtigungen() {
        console.log("Funktion checkeBerechtigungen");
        //Alle Knöpfe auf unsichtbar setzen
        $(".adminButton, .maButton").hide();

        aktuelleRolle = leseRolle();
        if (aktuelleRolle == 'admin') {
            console.log("\t admin");
            $(".adminButton").show();
        } else if (aktuelleRolle == 'mitarbeiter') {
            console.log("\t mitabeiter");
            $(".maButton").show();
        } else {
            console.log("\t nicht eingeloggt");
        }


    }

    function leseRolle() {
        console.log("Funktion leseRolle");
        return $("input[name='rolle']:checked").val();


    }

    function einloggen() {
        console.log("Funktion einloggen mit " + rolle);

        //Loggen-Knopf setzen
        setLoginButton('ausloggen');

        //Richtige Ansicht nach dem Einloggen anzeigen
        homepageAnzeigen()
        //Berechtigungen anpassen
        checkeBerechtigungen();


        let url = `admin/${leseRolle()}.html${window.location.search}`
        window.location.replace(url);
    }

    function ausloggen() {
        console.log("Funktion ausloggen");

        //Ausloggen
        $("input[name='rolle']").prop('checked', false);

        //Loggen-Knopf setzen
        setLogoutButton('zeigeLoginmaske');
        //Richtige Ansicht nach dem Ausloggen anzeigen
        homepageAnzeigen()
        //Berechtigungen anpassen
        checkeBerechtigungen();
    }

    function setLoginButton(func) {
        console.log("Funktion setLoginButton mit " + func)
        //Loggen-Knopf zu Logout-Knopf machen
        $("#logKnopf").html("Ausloggen")
            .attr("onclick", func + "()");
    }

    function setLogoutButton(func) {
        console.log("Funktion setLogoutButton mit " + func)
        //Loggen-Knopf zu Login-Knopf machen
        $("#logKnopf").html("Einloggen")
            .attr("onclick", func + "()");
    }

    function zeigeLoginmaske() {
        console.log('zeigeLoginmaske');
        //nur Loginansicht sichtbar machen
        $(".view").hide();
        $("#loginMaske").show();
    }


    homepageAnzeigen();
    $("#loginMaske").hide();
    setLoginButton();
</script>
<script type="module" src="../client-js/main.js"></script>
</body>
</html> 
